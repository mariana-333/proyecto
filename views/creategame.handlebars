<main>
      <section class="private-game">
        <h1>Crear Nueva Partida</h1>
        <div class="games-grid">
          <div class="game-info">
            {{#if success}}
            <div class="success-message">
              <h3>ðŸŽ‰ Â¡Partida creada exitosamente!</h3>
              {{#if message}}
              <p>{{message}}</p>
              {{/if}}
              
              <div class="invitation-details">
                <h4>Enlace de invitaciÃ³n:</h4>
                <div class="invitation-link-container">
                  <input type="text" value="{{invitationLink}}" id="invitationLink" readonly class="input-text">
                  <button onclick="copyInvitationLink()" class="button" style="margin-left: 10px;">ðŸ“‹ Copiar</button>
                </div>
                <p><small>Comparte este enlace con el jugador que quieres invitar. El primer jugador que haga clic se unirÃ¡ a tu partida.</small></p>
                
                <div class="game-details">
                  <p><strong>ID de Partida:</strong> {{gameId}}</p>
                  <p><strong>Tu color:</strong> {{#if (eq ownerColor 'blanca')}}â™” Blancas{{else}}â™š Negras{{/if}}</p>
                </div>
                
                <div class="action-buttons">
                  <a href="/chessboard" class="button">ðŸŽ® Ir al tablero</a>
                  <a href="/my-games" class="button">ðŸ“‹ Ver mis partidas</a>
                  <a href="/creategame" class="button">âž• Crear otra partida</a>
                </div>
              </div>
            </div>
            {{else}}
            <form action="/creategame" method="post" class="formulary">
              {{#if error}}
              <div class="error">{{error}}</div>
              {{/if}}
              
              <div class="fieldset">
                <label for="color">Elige tu color:</label>
                <select name="color" id="color" required class="input-text">
                  <option value="blanca">â™” Blancas</option>
                  <option value="negra">â™š Negras</option>
                </select>
              </div>

              <div class="fieldset">
                <label for="email">Invitar jugador (opcional):</label>
                <input name="email" class="input-text" type="email" id="email" 
                        placeholder="correo@ejemplo.com">
                <small>Si dejas este campo vacÃ­o, podrÃ¡s compartir el enlace con cualquier jugador</small>
              </div>

              <div class="submit">
                <button type="submit" class="button">ðŸŽ¯ Crear partida</button>
              </div>
            </form>
            {{/if}}
          </div>
        </div>
      </section>
    </main>

    <script>
    function copyInvitationLink() {
        const linkInput = document.getElementById('invitationLink');
        linkInput.select();
        linkInput.setSelectionRange(0, 99999); // Para mÃ³viles
        
        try {
            document.execCommand('copy');
            
            // Cambiar el texto del botÃ³n temporalmente
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'âœ… Â¡Copiado!';
            button.style.backgroundColor = '#4CAF50';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.backgroundColor = '';
            }, 2000);
        } catch (err) {
            alert('No se pudo copiar automÃ¡ticamente. Selecciona y copia el enlace manualmente.');
        }
    }
    </script>
 